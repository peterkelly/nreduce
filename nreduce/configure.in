AC_INIT(src/nreduce.c)
AM_CONFIG_HEADER(config.h)
AM_INIT_AUTOMAKE(nreduce, 0.1)
AC_PROG_CC
AM_PROG_LEX
AC_PROG_YACC
AC_PROG_INSTALL
AC_PROG_LIBTOOL


AC_MSG_CHECKING([for yylex_destroy])
echo -e "%%\n%%" > conftest.l
flex conftest.l
if grep -q yylex_destroy lex.yy.c
then
  AC_MSG_RESULT([yes])
  AC_DEFINE([HAVE_YYLEX_DESTROY],[1],[Whether or not flex generates the yylex_destroy function])
else
  AC_MSG_RESULT([no])
fi
rm -f conftest.l lex.yy.c

ALL_LIBS="-lm"
AC_SUBST(ALL_LIBS)
CFLAGS="-g -Wall -O0"
#CFLAGS="-g -Wall -O0 -pg"

AC_OUTPUT(Makefile src/Makefile)
