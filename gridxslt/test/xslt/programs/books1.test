=================================== PROGRAM ====================================
gridxslt runtests.tmp/books.xml runtests.tmp/test.xsl
===================================== FILE =====================================
books.xml
<?xml version="1.0" encoding="utf-8"?>
<books>
  <book>
    <title>Enterprise Services Architecture</title>
    <author>Dan Woods</author>
    <chapter>Concepts and Philosophy</chapter>
    <chapter>In Practice</chapter>
    <chapter>Making the Business Case</chapter>
    <chapter>Anatomy</chapter>
    <chapter>The Platform</chapter>
    <chapter>Applying Enterprise Services Architecture</chapter>
    <chapter>Creating a Road Map</chapter>
    <chapter>The Enterprise Value Chain</chapter>
    <chapter>Enterprise Services Architecture and Society</chapter>
  </book>
  <book>
    <title>RT Essentials</title>
    <author>Dave Rolsky</author>
    <author>Darren Chamberlain</author>
    <author>Richard Foley</author>
    <author>Jesse Vincent</author>
    <author>Robert Spier</author>
    <chapter>What Is Ticketing?</chapter>
    <chapter>Installation</chapter>
    <chapter>Getting Started</chapter>
    <chapter>Command-Line Interface</chapter>
    <chapter>Administrative Tasks</chapter>
    <chapter>Scrips</chapter>
    <chapter>Example Configurations</chapter>
    <chapter>Architecture</chapter>
    <chapter>API</chapter>
    <chapter>Development Environments</chapter>
  </book>
  <book>
    <title>Upgrading to PHP 5</title>
    <author>Adam Trachtenberg</author>
    <chapter>Introduction</chapter>
    <chapter>Object-Oriented Programming</chapter>
    <chapter>MySQL</chapter>
    <chapter>SQLite</chapter>
    <chapter>XML</chapter>
    <chapter>Iterators and SPL</chapter>
    <chapter>Error Handling and Debugging</chapter>
    <chapter>Streams, Wrappers, and Filters</chapter>
    <chapter>Other Extensions</chapter>
    <chapter>PHP 5 in Action</chapter>
  </book>
</books>
===================================== FILE =====================================
test.xsl
<?xml version="1.0"?>
<xsl:transform xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="2.0">
  <xsl:output indent="yes"/>

  <xsl:template match="/">
    <items>
      <xsl:for-each select="/books/book">
        <xsl:variable name="bookno" select="position()"/>
        <xsl:variable name="bookcount" select="last()"/>
        <xsl:for-each select="chapter">
          <item>Book <xsl:value-of select="$bookno"/>, Chapter <xsl:value-of select="position()"/>: <xsl:value-of select="."/></item>
        </xsl:for-each>
      </xsl:for-each>
    </items>
  </xsl:template>

</xsl:transform>
==================================== OUTPUT ====================================
<?xml version="1.0" encoding="UTF-8"?>
<items>
   <item>Book 1, Chapter 1: Concepts and Philosophy</item>
   <item>Book 1, Chapter 2: In Practice</item>
   <item>Book 1, Chapter 3: Making the Business Case</item>
   <item>Book 1, Chapter 4: Anatomy</item>
   <item>Book 1, Chapter 5: The Platform</item>
   <item>Book 1, Chapter 6: Applying Enterprise Services Architecture</item>
   <item>Book 1, Chapter 7: Creating a Road Map</item>
   <item>Book 1, Chapter 8: The Enterprise Value Chain</item>
   <item>Book 1, Chapter 9: Enterprise Services Architecture and Society</item>
   <item>Book 2, Chapter 1: What Is Ticketing?</item>
   <item>Book 2, Chapter 2: Installation</item>
   <item>Book 2, Chapter 3: Getting Started</item>
   <item>Book 2, Chapter 4: Command-Line Interface</item>
   <item>Book 2, Chapter 5: Administrative Tasks</item>
   <item>Book 2, Chapter 6: Scrips</item>
   <item>Book 2, Chapter 7: Example Configurations</item>
   <item>Book 2, Chapter 8: Architecture</item>
   <item>Book 2, Chapter 9: API</item>
   <item>Book 2, Chapter 10: Development Environments</item>
   <item>Book 3, Chapter 1: Introduction</item>
   <item>Book 3, Chapter 2: Object-Oriented Programming</item>
   <item>Book 3, Chapter 3: MySQL</item>
   <item>Book 3, Chapter 4: SQLite</item>
   <item>Book 3, Chapter 5: XML</item>
   <item>Book 3, Chapter 6: Iterators and SPL</item>
   <item>Book 3, Chapter 7: Error Handling and Debugging</item>
   <item>Book 3, Chapter 8: Streams, Wrappers, and Filters</item>
   <item>Book 3, Chapter 9: Other Extensions</item>
   <item>Book 3, Chapter 10: PHP 5 in Action</item>
</items>
================================== RETURN CODE =================================
0
